<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>imgedit</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="wasm.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="wasm_exec.js"></script>
    <script src="drop-zone.js"></script>
    <script src="wasm.js"></script>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>image edit tools</h1>
        <p>Image edit tools created from <a href="https://github.com/icemint0828/imgedit">imgedit package</a> with wasm.
        </p>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div>
                <ul class="nav tab-group"><!--nav-tabs nav-justified-->
                    <li class="active"><a href="#resize" data-toggle="tab">resize</a></li>
                    <li><a href="#grayscale" data-toggle="tab">grayscale</a></li>
                    <li><a href="#reverse" data-toggle="tab">reverse</a></li>
                </ul>
                <div class="content">
                    <div class="preview">
                        <h2>upload image</h2>
                        <div id="preview"></div>
                        <div id="error-message" style="color: crimson"></div>
                    </div>
                    <div class="operation">
                        <div class="drop">
                            <h2>upload area</h2>
                            <p>Drag and drop a file or</p>
                            <input class="button" type="file" name="file" id="file-input"
                                   accept=".png, .jpg, .jpeg, .gif" disabled>
                        </div>
                        <div class="tab-content">
                            <div class="tab-pane active" id="resize">
                                <h2> resize </h2>
                                <div>
                                    <label>width:&nbsp;<input type="number" max="5000" min="0" step="1" id="width"></label>
                                    &nbsp;&nbsp;
                                    <label>height:&nbsp;<input type="number" max="5000" min="0" step="1" id="height"></label>
                                </div>
                                <div></div>
                                <button class="button" onClick="resize();" disabled>execute</button>
                            </div>
                            <div class="tab-pane" id="grayscale">
                                <div id="drop-zone">
                                    <h2> grayscale </h2>
                                    <button class="button" onClick="grayscale();" disabled>
                                        execute
                                    </button>
                                </div>
                            </div>
                            <div class="tab-pane" id="reverse">
                                <h2> reverse </h2>
                                <p>Mauris id est cursus leo consequat sagittis. Sed vel dictum dolor. Morbi massa
                                    mauris,
                                    ultricies faucibus mollis eu, convallis eu nisl. Ut nec imperdiet urna. Quisque a
                                    ornare
                                    nisl. Nulla viverra facilisis nulla nec semper. Quisque mollis posuere neque non
                                    adipiscing.
                                    Vestibulum a orci rhoncus, dictum nisl id, rutrum erat. Pellentesque sem leo,
                                    facilisis
                                    sit
                                    amet faucibus vitae, elementum vitae enim. Suspendisse semper euismod erat, vel
                                    aliquet
                                    augue iaculis quis. </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    let preview = document.getElementById('preview')
    let errorMessage = document.getElementById("error-message")

    function previewBlob(blob) {
        /* FileReaderで読み込み、プレビュー画像を表示。 */
        let fr = new FileReader()
        fr.readAsDataURL(new File([blob], "name", {lastModified: 0}))
        fr.onload = function () {
            let img = document.createElement('img')
            img.setAttribute('src', fr.result)
            img.setAttribute('class', 'image')
            preview.innerHTML = ''
            preview.appendChild(img)
            errorMessage.innerHTML = 'edit success'
        };
    }
</script>
</body>
</html>